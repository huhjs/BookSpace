<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{fragment/public_layout}">

<!--연결해야 할 외부 css파일  -->
<th:block layout:fragment="content_css">
	<!--<link rel="stylesheet" href=""> -->
</th:block>

<th:block layout:fragment="content">
   qna 리스트
   <div class="library-intro-div">
   	<table>
   		<thead>
   		
   		<!--답변 상태 추가해야 됨  -->
   		
   			<tr>
   				<td>No</td>
   				<td>제목</td>
   				<td>작성자</td>
   				<td>작성일</td>
   				<td>조회수</td>
   			</tr>
   		</thead>
   		<tbody>
   		<th:block th:if="${#lists.size(qnaList) == 0}">
   			<tr>
   				<td colspan="5"> 게시글이 없습니다</td>
   			</tr>
   		</th:block>
   		<th:block th:if="${#lists.size(qnaList) != 0}">
   		
   		<tr th:each=" qna, detailState : ${qnaList} ">
   		<!-- <td th:text="${#lists.size(qna) - detailState.index + 1}"></td> -->
		<td th:text="${qna.getRowNumber}"></td> 
		
   			<td>
   				<a th:href="@{/info/qnaDetail(qnaCode=${qna.qnaCode})}">
   	
   					<span th:text="${qna.qnaTitle}"></span>
   				</a>
   			</td>
   			<td>[[${qna.memId}]]</td>
   			<td>[[${qna.qnaCreateDate}]]</td>
   			<td>[[${qna.qnaViewCnt}]]</td>
   			
   		</tr>
   		
   		</th:block>
   			
   		</tbody>
   	</table>
   	
   	<div style="text-align: center; margin-top: 20px; margin-bottom: 20px;">
   	
			<th:block th:if="${pageVO.prevPageFlag}">
				<a th:href="@{/info/qna(nowPageNum=${pageVO.startPageNum - 1})}">이전</a>
			</th:block>		
				
			<th:block th:each="pageNum : ${#numbers.sequence(pageVO.startPageNum, pageVO.endPageNum)}">
				<a th:href="@{/info/qna(nowPageNum=${pageNum})}"><span th:text="${pageNum}"></span></a> 
			</th:block>
			
			<th:block th:if="${pageVO.nextPageFlag}">
				<a th:href="@{/info/qna(nowPageNum=${pageVO.endPageNum + 1})}">다음</a>
			</th:block>
			
		</div>
		 	<div>
   		
   		<button sec:authorize="isAnonymous()" type="button" 
   		onclick="location.href='/member/loginForm'">로그인 후 질문 작성</button>
   		
   		<button sec:authorize="isAuthenticated()" type="button" 
   		onclick="location.href='/info/questionForm'">질문 작성</button>
   	</div>
   </div>
</th:block>

<!--연결해야 할 외부 js 파일  -->
<th:block layout:fragment="content_js">
	<!--<script type="text/javascript" src=""></script> -->
</th:block>

</html>