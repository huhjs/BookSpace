<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{fragment/public_layout}">

<!--연결해야 할 외부 css파일  -->
<th:block layout:fragment="content_css">
	<!--<link rel="stylesheet" href=""> -->
</th:block>

<th:block layout:fragment="content">
  qna detail
  <div>제목 : [[${qna.qnaTitle}]]</div>
	<div style="border-bottom: 1px solid black;">
	<div>작성자 : [[${qna.memId}]]</div>
	<div>조회수 : [[${qna.qnaViewCnt}]]</div>
	<div>작성일 : [[${qna.qnaCreateDate}]]</div>
	<div id="qnaContent">내용 : [[${qna.qnaContent}]]</div>
		
		<div  th:if="${#authentication.name == qna.memId}">
			
			<!--관리자가 답글을 달았을 경우 수정 못하게  -->
			
			<div th:if="${qna.isAdminAnswer == 'N' }">
				<input type="button" value="문의 수정" th:onclick="updateQna(this, [[${qna.qnaCode}]] );">
			</div>
			
			<input type="button" value="삭제" th:onclick="|location.href='@{/info/deleteQna(qnaCode=${qna.qnaCode})}'|">
		</div>

		<div th:if="${#authorization.expression('hasRole(''ROLE_ADMIN'')')}">
			<input type="button" value="삭제" th:onclick="|location.href='@{/info/deleteQna(qnaCode=${qna.qnaCode})}'|">
		</div>
		
	</div>
	<div>

		<!-- 관리자 권한을 가진 사용자만 보이는 버튼 -->
	<div th:if="${#authorization.expression('hasRole(''ROLE_ADMIN'')')}">

	
		<form th:action="@{/info/sendAnswer}" method="post">
			<input type="hidden" th:value="${qna.qnaCode}" name="qnaCode">
			<textarea rows="10" cols="50" name="answerContent" id="uploadAnswerContent"></textarea>
			<input type="submit" value="등록">
		</form>
	</div>
	
		<div th:each=" answer : ${answer} ">
			<div style="margin-bottom: 10px; border-bottom: 1px solid black;">
						<div>[[${answer.memId}]]</div>
						<div>[[${answer.answerCreateDate}]]</div>
						<div id="answerContent">[[${answer.answerContent}]]</div>
				<div th:if="${#authorization.expression('hasRole(''ROLE_ADMIN'')')}">
					<input type="button" value="수정"  th:onclick="updateAnswer(this, [[${answer.answerCode}]], [[${answer.qnaCode}]]);"> 
					<input type="button" value="삭제" th:onclick="|location.href='@{/info/deleteAnswer(qnaCode=${answer.qnaCode}, answerCode=${answer.answerCode})}'|">
			</div>
			</div>
		</div>
	</div>



</th:block>

<!--연결해야 할 외부 js 파일  -->
<th:block layout:fragment="content_js">
	<script type="text/javascript" src="/js/content/info/update_about_qna.js"></script>
</th:block>

</html>