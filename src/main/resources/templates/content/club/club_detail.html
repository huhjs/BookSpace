<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
    xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
    xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
    layout:decorate="~{fragment/public_layout}">

<!-- 연결해야 할 외부 css파일 -->
<th:block layout:fragment="content_css">
	<link rel="stylesheet" href="/css/content/club/club_detail.css">
</th:block>

<!-- 본문 내용 -->
<th:block layout:fragment="content">
	<div class="club-detail-div">
		<div class="club-name-div">
			[[${club.clubName}]]
			<div>
				<th:block th:if="${club.memId != #authentication.name}">
					<th:block th:if="${clubMemCnt < club.clubMemCnt}">
						<input type="button" class="btn custom-btn" value="가입 신청" th:disabled="${clubMemCnt >= club.clubMemCnt}" th:onclick="joinClub([[${#authentication.name}]], [[${club.clubCode}]]);">
					</th:block>
					<th:block th:unless="${clubMemCnt < club.clubMemCnt}">
						<input type="button" class="btn custom-btn" value="신청 마감" disabled>
					</th:block>
				</th:block>
				<input type="button" class="btn custom-btn" th:value="${club.clubName} + ' 커뮤니티'" th:onclick="memberOnly([[${#authentication.name}]], [[${club.clubCode}]], [[${subMenuVO.mainMenuCode}]], [[${subMenuVO.subMenuCode}]]);">
			</div>
		</div>			
		<div class="row detail-body">
			<div class="col">
				<div class="row mb-4">
					<div class="col-4" style="background-color: lightgreen">
						<div><img th:src="${'/image/club/' + club.bookClubImageVO.bcAttachedFileName}" height="400px;"></div>
					</div>
					<div class="col-4" style="background-color: yellow">
						<div class="row book-div">
							<div class="offset-4 col-3">
								이달의 책
							</div>
							<div class="col-2">
								<input type="button" class="btn custom-btn" value="등록" data-bs-toggle="modal" data-bs-target="#bookModal" onclick="bookOfThisMonth();">
							</div>
						</div>
						<div class="row" style="background-color: gray; height: 300px; width: 200px;">
							<div class="col" style="background-color: white;">
								<img alt="" src="/image/weather/sunny.png" width="180px;" height="200px;">
							</div>
							<div class="col">
								zz
							</div>
						</div>
						
					</div>
				</div>	
				<div class="row" style="background-color: pink">
					<div class="col">
						<table>
							<colgroup>
								<col width="27%">
								<col width="*">
							</colgroup>
							<tr>
								<td><span>북클럽 소개</span></td>
								<td>[[${club.clubIntro}]]</td>
							</tr>
							<tr>
								<td><span>북클럽 인원</span></td>
								<td>[[${clubMemCnt}]] / [[${club.clubMemCnt}]]</td>
							</tr>
							<tr>
								<td>회원</td>
								<th:block th:each="member : ${memList}">
									<td>[[${member.memberVO.memName}]]</td>
								</th:block>
							</tr>
						</table>
					</div>
				</div>	
				<th:block th:if="${club.memId == #authentication.name}">
					<div class="row manage-div">
						<div class="offset-10 col-2">
							<input type="button" value="북클럽 수정" class="btn custom-btn" th:onclick="|location.href='@{/club/updateClubForm(clubCode=${club.clubCode}, mainMenuCode=${subMenuVO.mainMenuCode}, subMenuCode=${subMenuVO.subMenuCode})}';|">
							<input type="button" value="북클럽 삭제" class="btn custom-btn" th:onclick="deleteClub([[${club.clubCode}]], [[${subMenuVO.mainMenuCode}]], [[${subMenuVO.subMenuCode}]]);">
						</div>
					</div>
				</th:block>
			</div>
		</div>
	</div>
	
	
	
	
	<!-- Modal -->
	<div class="modal fade" id="bookModal" tabindex="-1" aria-labelledby="bookdModalLabel" aria-hidden="true">
	  <div class="modal-dialog modal-lg modal-dialog-scrollable">
	    <div class="modal-content">
	      <div class="modal-header">
	        <h1 class="modal-title fs-5" id="bookdModalLabel">이달의 책</h1>
	        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
	      </div>
	      <div class="modal-body" id="m-body">
	        <div>
	        	<form class="row" id="searchForm" th:action="@{/club/clubDetail}" method="post" th:object="${bookVO}">
					<div class="offset-2 col-2">
						<select class="form-select" th:field="*{searchOption}">
							<option value="title">제목</option>
							<option value="writer">작성자</option>
						</select>
					</div>
					<div class="col-6">	
						<input type="text" class="form-control" th:field="*{searchText}">
					</div>
					<div class="col-2">
						<a><img src="/image/search.png" width="28px;" onclick="searchForm();" style="cursor: pointer;"></a>
					</div>
				</form>
				<table>
					<tr th:each="book : ${bookList}">
						<td>[[${book.bookTitle}]]</td>
					</tr>
				</table>
	      </div>
	      <div class="modal-footer">
	        <button type="button" class="btn btn-primary">선택</button>
	        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">닫기</button>
	      </div>
	    </div>
	  </div>
	</div>
	</div>
	
	
	
	
	
	
	
	
	<div class="weather-div">
		<div class="weather">
			<div class="weather-img"></div>
			<h1 id="temperature"></h1>
			<div class="wind-container">
				<img src="/image/weather/wind.png" class="wind-icon">
				<div>
					<p class="wind" id="wind"></p>
					<p class="wind">Wind Speed</p>
					</div>
			</div>
		</div>
<span id="description"></span>
		<span id="description"></span>
	</div>

</th:block>

<!-- 연결해야 할 외부 js파일 -->
<th:block layout:fragment="content_js">
	<script type="text/javascript" src="/js/content/club/club_detail.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</th:block>

</html>