<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
    xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
    xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
    layout:decorate="~{fragment/public_layout}">

<!-- 연결해야 할 외부 css파일 -->
<th:block layout:fragment="content_css">
	<!-- <link rel="stylesheet" href=""> -->
</th:block>

<!-- 본문 내용 -->
<th:block layout:fragment="content">
	<div class="board-detail-div">
		<div class="row">
			<div class="col">
				<table class="table">
					<colgroup>
						<col width="">
						<col width="">
					</colgroup>
					<tr>
						<td>제목</td>
						<td>[[${board.boardTitle}]]</td>
						<td>조회수</td>
						<td>[[${board.readCnt}]]</td>
					</tr>
					<tr>
						<td>작성자</td>
						<td>[[${board.boardWriter}]]</td>
						<td>작성일</td>
						<td>[[${board.regDate}]]</td>
					</tr>
					<tr>
						<td>내용</td>
						<td>[[${board.boardContent}]]</td>
					</tr>
				</table>
			</div>
		</div>
		<div class="row">
			<div class="col" th:if="${board.boardWriter == #authentication.name}">
				<input type="button" class="btn custom-btn" value="수정" th:onclick="|location.href='@{/club/updateBoard(boardNum=${board.boardNum}, clubCode=${board.clubCode})}';|">
				<input type="button" class="btn custom-btn" value="삭제" th:onclick="deleteBoard([[${board.boardNum}]],[[${board.clubCode}]]);">
			</div>
		</div>
		<div class="reply-div">
			<form class="row" action="@{/club/regReply}" method="post">
				<div class="col-12">
					<input type="hidden" name="boardNum" th:value="${board.boardNum}">
					<textarea rows="3" class="form-control" cols="100" name="replyContent"></textarea>
				</div>
				<div class="offset-11">
					<input sec:authorize="isAuthenticated()" class="btn custom-btn" type="submit" value="등록">
				</div>
			</form>
			<div th:each="reply : ${replyList}" style="margin-bottom: 10px;">
				<div>[[${reply.replyWriter}]]</div>
				<div>[[${reply.regDate}]]</div>
				<div>[[${reply.replyContent}]]</div>
				<div th:if="${authentication != null and authentication.principal.username == reply.replyWriter}">
					<input type="button" value="수정"
						th:onclick="updateReply(this, [[${reply.replyNum}]], [[${board.boardNum}]]);">
					<input type="button" value="삭제"
						th:onclick="|location.href='@{/reply/deleteReply(replyNum=${reply.replyNum}, boardNum=${board.boardNum})}';|">
				</div>
			</div>
			
			
	
	<div>
		<div th:each="reply : ${replyList}" style="margin-bottom: 10px;">
			<div>[[${reply.replyWriter}]]</div>
			<div>[[${reply.regDate}]]</div>
			<div>[[${reply.replyContent}]]</div>
			<div th:if="${session.loginInfo != null and session.loginInfo.memId == reply.replyWriter}">
				<input type="button" value="수정" th:onclick="setInput(this, [[${reply.replyNum}]], [[${board.boardNum}]]);">
				<input type="button" value="삭제" th:onclick="|location.href='@{/reply/deleteReply(replyNum=${reply.replyNum}, boardNum=${board.boardNum})}';|">
			</div>
		</div>
	</div>
			
			
			
		</div>
	</div>
</th:block>

<!-- 연결해야 할 외부 js파일 -->
<th:block layout:fragment="content_js">
	<script type="text/javascript" src="/js/content/club/board_detail.js"></script>
</th:block>

</html>